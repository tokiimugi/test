---
title: 'test2'
date: '2020-10-19'
---



<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
## ✓ tibble  3.0.4     ✓ dplyr   1.0.2
## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(janitor)</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>library(ggplot2)
library(brms)</code></pre>
<pre><code>## Loading required package: Rcpp</code></pre>
<pre><code>## Loading &#39;brms&#39; package (version 2.14.0). Useful instructions
## can be found by typing help(&#39;brms&#39;). A more detailed introduction
## to the package is available through vignette(&#39;brms_overview&#39;).</code></pre>
<pre><code>## 
## Attaching package: &#39;brms&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     ar</code></pre>
<div id="data" class="section level2">
<h2>Data</h2>
<pre class="r"><code>raw_health &lt;- read_csv(&quot;AAsD8pYL_1.csv&quot;)</code></pre>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   .default = col_double()
## )
## ℹ Use `spec()` for the full column specifications.</code></pre>
<pre class="r"><code>health &lt;- raw_health %&gt;% select(CASEID, dvagegr, dvsex, dvperinc, dvbmimdf, a9cap, g2cap, g3cap, h2hrs, j3, k4, m17cap, m19) 
health &lt;- health %&gt;% clean_names() %&gt;% 
    rename (case_id = caseid, age_first_diagnosed_with_diabetes = a9cap, sex = dvsex,  
            age = dvagegr, personal_income_12months = dvperinc, BMI = dvbmimdf, 
            height = g2cap, weight = g3cap, sleep_hours = h2hrs, 
            cigarettes_smoke_per_day= j3, average_drink_for_12_months = k4, 
            work_hours_per_week = m17cap, nightshift_frequency = m19)
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(age_first_diagnosed_with_diabetes = case_when(
      age_first_diagnosed_with_diabetes== 97 ~ as.numeric(NA),
      age_first_diagnosed_with_diabetes== 99 ~ as.numeric(NA),
      TRUE ~ as.numeric(age_first_diagnosed_with_diabetes)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(BMI = case_when(
      BMI== 99.9 ~ as.numeric(NA),
      TRUE ~ as.numeric(BMI)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(height = case_when(
      height== 998 ~ as.numeric(NA),
      TRUE ~ as.numeric(height)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(weight = case_when(
      weight== 998 ~ as.numeric(NA),
      TRUE ~ as.numeric(weight)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(work_hours_per_week = case_when(
      work_hours_per_week== 97 ~ as.numeric(NA),
      work_hours_per_week== 99 ~ as.numeric(NA),
      TRUE ~ as.numeric(work_hours_per_week)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(sleep_hours = case_when(
      sleep_hours== 99 ~ as.numeric(NA),
      TRUE ~ as.numeric(sleep_hours)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(cigarettes_smoke_per_day = case_when(
      cigarettes_smoke_per_day== 97 ~ as.numeric(NA),
      cigarettes_smoke_per_day== 99 ~ as.numeric(NA),
      TRUE ~ as.numeric(cigarettes_smoke_per_day)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(age = case_when(
    age== 1 ~ &quot;15 to 17&quot;,
    age== 2 ~ &quot;18 to 19&quot;,
    age== 3 ~ &quot;20 to 24&quot;,
    age== 4 ~ &quot;25 to 29&quot;,
    age== 5 ~ &quot;30 to 34&quot;,
    age== 6 ~ &quot;35 to 39&quot;,
    age== 7 ~ &quot;40 to 44&quot;,
    age== 8 ~ &quot;45 to 49&quot;,
    age== 9 ~ &quot;50 to 54&quot;,
    age== 10 ~ &quot;55 to 59&quot;,
    age== 11 ~ &quot;60 to 64&quot;,
    age== 12 ~ &quot;65 to 69&quot;,
    age== 13 ~ &quot;70 to 74&quot;,
    age== 14 ~ &quot;75 to 79&quot;,
    age== 15 ~ &quot;80 to 99&quot;,
  )) 
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(sex = case_when(
    sex== 1 ~ &quot;Male&quot;,
    sex== 2 ~ &quot;Female&quot;
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(personal_income_12months = case_when(
      personal_income_12months== 1 ~  &quot;No income&quot;,
      personal_income_12months== 2 ~  &quot;Less than $5,000&quot;,
      personal_income_12months== 3 ~  &quot;$5,000 to 9,999&quot;,
      personal_income_12months== 4 ~  &quot;$10,000 to 14,999&quot;,
      personal_income_12months== 5 ~  &quot;$15,000 to 19,999&quot;,
      personal_income_12months== 6 ~  &quot;$20,000 to 29,999&quot;,
      personal_income_12months== 7 ~  &quot;$30,000 to 39,999&quot;,
      personal_income_12months== 8 ~  &quot;$40,000 to 59,999&quot;,
      personal_income_12months== 9 ~  &quot;$60,000 to 79,999&quot;,
      personal_income_12months== 10 ~  &quot;$80,000 or more&quot;,
      personal_income_12months== 98 ~  &quot;Do not know&quot;,
      personal_income_12months== 99 ~  as.character(NA)
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(average_drink_for_12_months = case_when(
      average_drink_for_12_months== 1 ~ &quot;Every day&quot;,
      average_drink_for_12_months== 2 ~ &quot;4 - 6 times a week&quot;,
      average_drink_for_12_months== 3 ~ &quot;2 - 3 times a week&quot;,
      average_drink_for_12_months== 4 ~ &quot;Once a week&quot;,
      average_drink_for_12_months== 5 ~ &quot;Once or twice a month&quot;,
      average_drink_for_12_months== 6 ~ &quot;Less often than once a month&quot;,
      average_drink_for_12_months== 0 ~ as.character(NA),
      average_drink_for_12_months== 8 ~ &quot;Do not know&quot;,
      average_drink_for_12_months== 9 ~ as.character(NA),
))
health &lt;- health %&gt;% 
  rowwise() %&gt;% 
  mutate(nightshift_frequency = case_when(
      nightshift_frequency== 1 ~ &quot;Regularly&quot;,
      nightshift_frequency== 2 ~ &quot;Sometimes&quot;,
      nightshift_frequency== 3 ~ &quot;Never&quot;,
      nightshift_frequency== 0 ~ as.character(NA),
      nightshift_frequency== 9 ~ as.character(NA),
))
health &lt;- na.omit(health)

health</code></pre>
<pre><code>## # A tibble: 4 x 13
## # Rowwise: 
##   case_id age   sex   personal_income…   BMI age_first_diagn… height weight
##     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;            &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1    4585 50 t… Male  $40,000 to 59,9…  24.6               42    178     78
## 2   28774 35 t… Male  $10,000 to 14,9…  30.9               28    180    100
## 3   19575 50 t… Male  $40,000 to 59,9…  31.6               53    178    100
## 4   24186 40 t… Fema… $10,000 to 14,9…  34.4               26    160     88
## # … with 5 more variables: sleep_hours &lt;dbl&gt;, cigarettes_smoke_per_day &lt;dbl&gt;,
## #   average_drink_for_12_months &lt;chr&gt;, work_hours_per_week &lt;dbl&gt;,
## #   nightshift_frequency &lt;chr&gt;</code></pre>
<pre class="r"><code>par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&#39;Sky&#39;, &#39;Sunny side of pyramid&#39;, &#39;Shady side of pyramid&#39;),
  col = c(&#39;#0292D8&#39;, &#39;#F7EA39&#39;, &#39;#C4B632&#39;),
  init.angle = -50, border = NA
)</code></pre>
<div class="figure"><span id="fig:pie"></span>
<img src="/post/test2_files/figure-html/pie-1.png" alt="A fancy pie chart." width="672" />
<p class="caption">
Figure 1: A fancy pie chart.
</p>
</div>
</div>
